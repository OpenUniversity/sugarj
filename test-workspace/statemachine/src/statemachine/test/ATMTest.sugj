package statemachine.test;

import statemachine.test.ATM<statemachine.ToJava>;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;

public class ATMTest {
  public static void main(String[] args) {
    ATM machine = new ATM();
    
    BufferedReader inputReader = new BufferedReader(new InputStreamReader(System.in));
    String in;
    
    System.out.println("Welcome. Possible events are:");
    for (ATM.Event e : ATM.Event.values())
      System.out.print(e + ", ");
    System.out.println("reset, and exit.");

    try {
	  while ((in = inputReader.readLine()) != null) {
	    if ("exit".equals(in))
	      break;
	    else if ("reset".equals(in)) {
	      main(args);
          break;
        }
	    else {
	      machine.step(ATM.Event.valueOf(in));
	      System.out.println("Current state is " + machine.currentState() + ". Next event?");
	    }
	  }
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}