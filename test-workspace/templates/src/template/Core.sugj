package template;

import org.sugarj.languages.Stratego;
import org.sugarj.languages.SugarJ;

public sugar Core {
  desugarings
    template-to-sugar

  rules
    template-to-sugar :
      TemplateDec(mods, name, body) ->
      SugarDec(SugarDecHead(mods, name), SugarBody(transformation-elem(Rules(main-strategy))))
    where
      <compile-template-body> body => compiled-body;
      main-strategy := SDefNoArgs("main", compiled-body)

    compile-template-body = fail

  context-free syntax
    TemplateDec -> ToplevelDeclaration
    AnnoOrSugarMod* "template" JavaId "{" TemplateBody "}" -> TemplateDec {cons("TemplateDec")}
}